#############################################
##### Testing
#############################################

enable_testing()

add_test(
    NAME can_Run
    COMMAND ${appname}
)

add_test(
    NAME can_Print_Help_Without_Arguments
    COMMAND ${appname}
)
set_tests_properties (can_Print_Help_Without_Arguments
  PROPERTIES PASS_REGULAR_EXPRESSION "This is an application.")

add_test(
    NAME check_Number_Of_Arguments
    COMMAND ${appname} 1 2
)
set_tests_properties (check_Number_Of_Arguments
  PROPERTIES PASS_REGULAR_EXPRESSION "ERROR: Should be 3 arguments")

add_test(
    NAME check_First_Argument
    COMMAND ${appname} 1 2 3
)
set_tests_properties (check_First_Argument
  PROPERTIES PASS_REGULAR_EXPRESSION "ERROR: First should be")

add_test(
    NAME try_Read_From_Wrong_Path_On_Encoding
    COMMAND ${appname} encode 2 3
)
set_tests_properties (try_Read_From_Wrong_Path_On_Encoding
  PROPERTIES PASS_REGULAR_EXPRESSION "Cannot read from")

add_test(
    NAME try_Code_Wrong_String
    COMMAND ${appname} encode ${CMAKE_CURRENT_SOURCE_DIR}/test/wrong_input.txt ${CMAKE_CURRENT_SOURCE_DIR}/test/output.txt
)
set_tests_properties (try_Code_Wrong_String
  PROPERTIES PASS_REGULAR_EXPRESSION "Input text can't include")

add_test(
    NAME check_Succesful_Coding
    COMMAND ${appname} encode ${CMAKE_CURRENT_SOURCE_DIR}/test/right_input.txt ${CMAKE_CURRENT_SOURCE_DIR}/test/output.txt
)
set_tests_properties (check_Succesful_Coding
  PROPERTIES PASS_REGULAR_EXPRESSION "Encoding succesful, result")

add_test(
    NAME try_Read_From_Wrong_Path_On_Decoding
    COMMAND ${appname} decode 2 ${CMAKE_CURRENT_SOURCE_DIR}/test/output.txt
)
set_tests_properties (try_Read_From_Wrong_Path_On_Decoding
  PROPERTIES PASS_REGULAR_EXPRESSION "Cannot read from file")

add_test(
    NAME try_Decode_With_Wrong_Head
    COMMAND ${appname} decode ${CMAKE_CURRENT_SOURCE_DIR}/test/wrongHead.txt ${CMAKE_CURRENT_SOURCE_DIR}/test/output.txt
)
set_tests_properties (try_Decode_With_Wrong_Head
  PROPERTIES PASS_REGULAR_EXPRESSION "Wrong head of input file")

add_test(
    NAME try_Decode_With_Wrong_Body
    COMMAND ${appname} decode ${CMAKE_CURRENT_SOURCE_DIR}/test/wrongBody.txt ${CMAKE_CURRENT_SOURCE_DIR}/test/output.txt
)
set_tests_properties (try_Decode_With_Wrong_Body
  PROPERTIES PASS_REGULAR_EXPRESSION "Wrong body of input file")

add_test(
    NAME check_Succesful_Decoding
    COMMAND ${appname} decode ${CMAKE_CURRENT_SOURCE_DIR}/test/input.txt ${CMAKE_CURRENT_SOURCE_DIR}/test/output.txt
)
set_tests_properties (check_Succesful_Decoding
  PROPERTIES PASS_REGULAR_EXPRESSION "Decoding succesful, result")
